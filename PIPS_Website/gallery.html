<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery - Pinetown Independent Primary School</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/admin-data-manager.js"></script>
    <script src="js/modal.js"></script>
    <script src="js/lightbox.js"></script>
    <script src="js/post.js"></script>
    <script src="js/search.js"></script>
    <script src="js/ajax.js"></script>
</head>
<body>
     <!-- Navigation Bar -->
    <div style="margin-top: 120px; text-align: center; background: #f9f9f9; padding: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <ul style="list-style: none; padding: 0; margin: 0; display: inline-block;">
         <li style="display: inline; margin: 0 10px;"><a href="index.html" style="text-decoration: none; color: #000080; font-weight: bold; padding: 8px 15px; border-radius: 5px; transition: background 0.3s;">Home</a></li>
         <li style="display: inline; margin: 0 10px;"><a href="about.html" style="text-decoration: none; color: #000080; font-weight: bold; padding: 8px 15px; border-radius: 5px; transition: background 0.3s;">About Us </a></li>
         <li style="display: inline; margin: 0 10px;"><a href="contact.html" style="text-decoration: none; color: #000080; font-weight: bold; padding: 8px 15px; border-radius: 5px; transition: background 0.3s;">Contact </a></li>
         <li style="display: inline; margin: 0 10px;"><a href="gallery.html" style="text-decoration: none; color: #000080; font-weight: bold; padding: 8px 15px; border-radius: 5px; transition: background 0.3s;">Gallery</a></li>
         <li style="display: inline; margin: 0 10px;"><a href="resources.html" style="text-decoration: none; color: #000080; font-weight: bold; padding: 8px 15px; border-radius: 5px; transition: background 0.3s;">Resources </a></li>
         <li style="display: inline; margin: 0 10px;"><a href="admissions.html" style="text-decoration: none; color: #000080; font-weight: bold; padding: 8px 15px; border-radius: 5px; transition: background 0.3s;">Admissions </a></li>
         <li style="display: inline; margin: 0 10px;"><a href="notice_board.html" style="text-decoration: none; color: #000080; font-weight: bold; padding: 8px 15px; border-radius: 5px; transition: background 0.3s;">Notice Board</a></li>
         <li style="display: inline; margin: 0 10px;"><a href="enquiry.html" style="text-decoration: none; color: #000080; font-weight: bold; padding: 8px 15px; border-radius: 5px; transition: background 0.3s;">Enquiries </a></li>
         <li style="display: inline; margin: 0 10px;"><a href="uniform_shop.html" style="text-decoration: none; color: #000080; font-weight: bold; padding: 8px 15px; border-radius: 5px; transition: background 0.3s;">Uniform Shop</a></li>
         <li style="display: inline; margin: 0 10px;"><a href="volunteer.html" style="text-decoration: none; color: #000080; font-weight: bold; padding: 8px 15px; border-radius: 5px; transition: background 0.3s;">Volunteers & Sponsors</a></li>
        </ul>
    </div>    
    <!-- Page Content -->
    <div style="padding-top: 80px; text-align: center; min-height: 100vh;">
     <div style="background: #000080; padding: 15px 10px; border-radius: 0; position: fixed; top: 0px; left: 0; width: 100%; z-index: 999; text-align: center; display: flex; align-items: center; justify-content: center; min-height: 60px; box-sizing: border-box;"> 
       <img src="_images\logo.jpg" alt="logo" style="height: auto; max-height: 50px; width: auto; max-width: 80px; position: absolute; left: 10px; top: 50%; transform: translateY(-50%);">
         <h2>Gallery</h2>
     </div>  
     <div style="max-width: 1200px; margin: 0 auto; padding: 20px; background-color: #f8f9fa; min-height: calc(100vh - 160px);">
         <p style="text-align: center; font-size: 1.2rem; color: #666; margin-bottom: 40px;">A glimpse of our students, events, and achievements.</p>
         
         <style>
             .gallery-item img {
                 cursor: pointer;
                 transition: transform 0.3s ease, box-shadow 0.3s ease;
                 width: 100%;
                 height: 200px;
                 object-fit: cover;
                 border-radius: 8px;
             }
             
             .gallery-item img:error {
                 display: none;
             }
             
             .gallery-item {
                 position: relative;
             }
             
             .gallery-item::after {
                 content: '';
                 display: block;
                 position: absolute;
                 top: 0;
                 left: 0;
                 right: 0;
                 bottom: 0;
                 background: #f0f0f0;
                 border: 2px dashed #ccc;
                 border-radius: 8px;
                 z-index: -1;
             }
             
             .gallery-item img:hover {
                 transform: scale(1.05);
                 box-shadow: 0 4px 15px rgba(0,0,0,0.3);
             }
             
             .modal {
                 display: none;
                 position: fixed;
                 z-index: 9999;
                 left: 0;
                 top: 0;
                 width: 100%;
                 height: 100%;
                 background-color: rgba(0, 0, 0, 0.9);
                 animation: fadeIn 0.3s ease;
             }
             
             .modal-content {
                 position: relative;
                 margin: auto;
                 padding: 20px;
                 width: 90%;
                 height: 90%;
                 display: flex;
                 justify-content: center;
                 align-items: center;
                 flex-direction: column;
             }
             
             .modal-image {
                 max-width: 100%;
                 max-height: 80%;
                 object-fit: contain;
                 border-radius: 8px;
                 box-shadow: 0 4px 20px rgba(255, 255, 255, 0.1);
             }
             
             .modal-controls {
                 margin-top: 20px;
                 display: flex;
                 gap: 15px;
                 align-items: center;
             }
             
             .download-btn, .close-btn {
                 background: #000080;
                 color: #FFD700;
                 border: none;
                 padding: 12px 24px;
                 border-radius: 25px;
                 cursor: pointer;
                 font-weight: bold;
                 font-size: 16px;
                 transition: all 0.3s ease;
                 text-decoration: none;
                 display: inline-block;
             }
             
             .download-btn:hover, .close-btn:hover {
                 background: #000066;
                 transform: translateY(-2px);
                 box-shadow: 0 4px 12px rgba(0, 0, 128, 0.3);
             }
             
             .close-btn {
                 position: absolute;
                 top: 20px;
                 right: 30px;
                 background: #ff4444;
                 color: white;
                 font-size: 24px;
                 width: 50px;
                 height: 50px;
                 border-radius: 50%;
                 display: flex;
                 align-items: center;
                 justify-content: center;
                 padding: 0;
             }
             
             .close-btn:hover {
                 background: #cc0000;
             }
             
             @keyframes fadeIn {
                 from { opacity: 0; }
                 to { opacity: 1; }
             }
             
             .image-title {
                 color: #FFD700;
                 font-size: 18px;
                 font-weight: bold;
                 margin-bottom: 15px;
                 text-align: center;
             }
         </style>
         
         <div class="gallery-container">
             <div class="gallery-grid" id="galleryGrid">
                 <!-- Gallery images will be loaded dynamically -->
             </div>
         </div>
         
         <!-- Lightbox System handles the modal display -->
         
         <!-- Events and News Section -->
         <div style="background: #ffffff; padding: 20px; margin: 20px 0; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
             <div style="background: #000080; padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: center;">
                 <h2 style="color: #FFD700; margin: 0;">ðŸ“… Related Events & News</h2>
             </div>
             <div id="galleryEventsContainer">
                 <!-- Event and achievement posts will be loaded here -->
             </div>
         </div>
     </div>
    </div>
     <!-- Footer -->
    <div style="position: fixed; bottom: 0; left: 0; width: 100%; background: #ffffff; color: #000000; text-align: center; padding: 10px 0; z-index: 998; box-shadow: 0 -2px 8px rgba(0,0,0,0.1);">
     <hr style="margin: 0; border-color: #ffffff;"></hr>
     <footer>
        <p style="margin: 5px 0;">&copy; 2025 Pinetown Independent Primary School. All rights reserved.</p>
      </footer>   
     </div>

<script>
// Load gallery images from AdminDataManager
function loadGalleryImages() {
    const images = AdminDataManager.Gallery.getAll();
    const galleryGrid = document.getElementById('galleryGrid');
    
    if (images.length === 0) {
        galleryGrid.innerHTML = '<p style="text-align: center; color: #666; padding: 40px; grid-column: 1/-1;">No images in gallery yet.</p>';
        return;
    }
    
    let html = '';
    images.forEach(img => {
        html += `
            <div class="gallery-item">
                <img src="${img.src}" alt="${img.alt}">
            </div>
        `;
    });
    
    galleryGrid.innerHTML = html;
}

// Initialize lightbox system when page loads
document.addEventListener('DOMContentLoaded', function() {
    // Load gallery images first
    loadGalleryImages();
    
    // Then enhance with lightbox
    setTimeout(function() {
        enhanceGalleryImages();
    }, 100);
    
    // Load event and achievement posts for the gallery page
    if (typeof PostManager !== 'undefined') {
        // Load events and achievements (most relevant to gallery)
        const eventPosts = SchoolPosts.getByType('event');
        const achievementPosts = SchoolPosts.getByType('achievement');
        const relevantPosts = [...eventPosts, ...achievementPosts].slice(0, 4);
        PostManager.renderPostGrid(relevantPosts, 'galleryEventsContainer', '');
    }
});
</script>

</body>
</html>